<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Secure Payment</title>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <h1>Pay with Card</h1>
  <form id="payment-form">
    <div id="card-element"></div>
    <button id="submit">Pay</button>
  </form>
  <div id="error-message"></div>

  <script>
    const stripe = Stripe("pk_live_TREBUIE_CHEIA_TA_PUBLICA");

    const elements = stripe.elements();
    const card = elements.create("card");
    card.mount("#card-element");

    document.getElementById("payment-form").addEventListener("submit", async (e) => {
      e.preventDefault();

      // Ask backend to create PaymentIntent
      const res = await fetch("create-payment-intent.php", { method: "POST" });
      const data = await res.json();

      const result = await stripe.confirmCardPayment(data.clientSecret, {
        payment_method: { card: card }
      });

      if (result.error) {
        document.getElementById("error-message").textContent = result.error.message;
      } else {
        if (result.paymentIntent.status === "succeeded") {
          alert("Payment successful âœ…");
        }
      }
    });
  </script>
</body>
</html>
